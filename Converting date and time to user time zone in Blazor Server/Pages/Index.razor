@page "/"

@inject TimeZoneService TimeZoneService

<h1>Current time</h1>

<p>Now (UTC):   @DateTimeOffset.UtcNow.ToString()</p>
<p>Now (local): @now.ToString()</p>

@code {
    DateTimeOffset now;

    protected override async Task OnAfterRenderAsync ( bool firstRender )
    {
        if (firstRender)
        {
            // TODO: Require server render mode while instantiating the component to execute JavaScript in OnInitializedAsync.
            // In _Host.cshtml: <component type="typeof(App)" render-mode="Server" />
            now = await TimeZoneService.GetLocalDateTime(DateTimeOffset.UtcNow);
        }
    }
    
}
